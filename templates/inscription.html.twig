{% extends 'base.html.twig' %}

{% block content %}
	<div class="min-h-screen flex flex-col items-center justify-center bg-bg py-12 px-4 sm:px-6 lg:px-8">
		<h2 class="text-2xl lg:text-4xl font-semibold text-center text-title uppercase lg:font-extrabold mb-8">Inscription</h2>

		<div class="max-w-4xl w-full space-y-6 p-10 bg-form shadow-xl rounded-2xl"> <!-- Augmentation de la largeur -->			<form class="grid grid-cols-6 space-y-4 text-sm lg:text-base text-text" action="index.php?controlleur=inscription&methode=validerFormulaireInscription" method="post" enctype="multipart/form-data">

				<div class="grid grid-cols-subgrid row-start-1 col-start-1 col-span-6 p-2">
					<div class="flex flex-row items-center gap-2 col-start-1 col-span-2">
						<img src="../asset/icones/envelope.svg" class="w-6 h-6  py-1 rounded-md" alt="icone">
						<label for="email">Email</label>
					</div>
					<div class="col-start-3 col-span-4 w-full">
						<input type="email" id="email"  placeholder="E-mail" name="email" required title="Veuillez entrer une adresse e-mail valide" oninput='verifErreurSaisie(email)' class="w-full bg-transparent border-white border-2 border-solid rounded-lg px-2 py-1 placeholder-text outline-none text-text">
					</div>
				</div>

				<div class="grid grid-cols-subgrid row-start-2 col-start-1 col-span-6 p-2">
					<div class="flex flex-row items-center gap-2 col-start-1 col-span-2">
						<img src="../asset/icones/person-vcard (1).svg" class="w-6 h-6  py-1 rounded-md" alt="icone">
						<label for="nom">Nom</label>
					</div>
					<div class="col-start-3 col-span-4 w-full">
						<input type="text" id="nom" placeholder="Nom complet" name="nom" required title="Veuillez entrer votre nom complet" oninput='verifErreurSaisie(nom)' class="w-full bg-transparent border-white border-2 border-solid rounded-lg px-2 py-1 placeholder-text outline-none text-text">
					</div>
				</div>

				<div class="grid grid-cols-subgrid row-start-3 col-start-1 col-span-6 p-2">
					<div class="flex flex-row items-center gap-2 col-start-1 col-span-2">
						<img src="../asset/icones/person.svg" class="w-6 h-6  py-1 rounded-md" alt="icone">
						<label for="pseudo">Pseudo</label>
					</div>
					<div class="col-start-3 col-span-4 w-full">
						<input type="text" id="pseudo" placeholder="Nom d'utilisateur" name="pseudo" required title="Veuillez entrer un nom d'utilisateur" oninput='verifErreurSaisie(pseudo)' class="w-full bg-transparent border-white border-2 border-solid rounded-lg px-2 py-1 placeholder-text outline-none text-text">
					</div>
				</div>

				<!-- Champ mot de passe -->
				<div class="grid grid-cols-subgrid row-start-4 col-start-1 col-span-6 p-2 relative">
					<div class="flex flex-row items-center gap-2 col-start-1 col-span-2">
						<img src="../asset/icones/lock.svg" class="w-6 h-6  py-1 rounded-md" alt="icone">
						<label for="password">Mot de passe</label>
					</div>
					<div class="relative col-start-3 col-span-4 w-full">
						<input type="password" id="password" placeholder="Mot de passe" oninput='verifErreurSaisie(password)' name="mdp" required 
							title="Veuillez entrer un mot de passe sécurisé"
							class="bg-transparent border-white border-2 border-solid rounded-lg px-2 py-1 placeholder-text outline-none text-text w-full pr-10">
						<button type="button" class="toggle-password absolute right-2 top-1/2 transform -translate-y-1/2" tabindex="-1">
							<img src="../asset/icones/eye.svg" class="w-6 h-6 bg-button py-1 rounded-md" alt="Afficher le mot de passe">
						</button>
					</div>
				</div>

				<!-- Champ confirmation mot de passe -->
				<div class="grid grid-cols-subgrid row-start-5 col-start-1 col-span-6 p-2 relative">
					<div class="flex flex-row items-center gap-2 col-start-1 col-span-2">
						<img src="../asset/icones/lock.svg" class="w-6 h-6  py-1 rounded-md" alt="icone">
						<label for="confirm-password">Confirmer le mot de passe</label>
					</div>
					<div class="relative col-start-3 col-span-4 w-full">
						<input type="password" id="confirmpassword" oninput='verifErreurSaisie(confirmpassword)' placeholder="Confirmer le mot de passe" name="mdp2" required 
							title="Veuillez confirmer votre mot de passe"
							class="bg-transparent border-white border-2 border-solid rounded-lg px-2 py-1 placeholder-text outline-none text-text w-full pr-10">
						<button type="button" class="toggle-password absolute right-2 top-1/2 transform -translate-y-1/2" tabindex="-1">
							<img src="../asset/icones/eye.svg" class="w-6 h-6 bg-button py-1 rounded-md" alt="Afficher le mot de passe">
						</button>
					</div>
				</div>


                <div class="row-start-6 col-start-1 col-span-6 flex justify-center mt-4">
                    <button id="openNewsletterPopup" class="text-link underline text-sm">Voir la newsletter</button>
                </div>

				<div class="row-start-7 col-start-1 col-span-6 flex justify-center mt-4">
					<button type="submit" id="validerFormulaire" class="w-full p-3 bg-button text-tbutton font-bold rounded-lg hover:bg-hbutton transition">S'inscrire</button>
				</div>
			</form>

            <div class="flex items-center my-6">
                <hr class="w-full border-gray-300">
                <span class="px-4 text-gray-500">OU</span>
                <hr class="w-full border-gray-300">
            </div>
        
            <div class="text-center">
                <p class="text-gray-600">Vous avez déjà un compte ?</p>
                <a href="index.php?controlleur=connexion&methode=lister" class="block w-full p-3 bg-button text-tbutton font-semibold rounded-lg hover:bg-hbutton transition mt-2">Connectez-vous</a>
            </div>
		</div>
	</div>


    <!-- Popup Newsletter -->
    <div id="newsletterPopup" class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 hidden">
        <div class="bg-white p-6 rounded-lg shadow-lg w-96 text-center overflow-y-auto max-h-[90vh]">
            <h2 class="text-lg font-bold mb-4">Politique de confidentialité -GureKultura-</h2>
            <p class="text-sm text-gray-600 mb-4">Nous collectons les informations suivantes :</p>
            <ul class="list-disc pl-5 space-y-1 text-left">
                <li>Nom et prénom</li>
                <li>Adresse e-mail</li>
                <li>Numéro de téléphone (facultatif)</li>
            </ul>
            <h3 class="text-md font-semibold mt-4">Utilisation des données</h3>
            <p class="text-sm">Vos informations sont utilisées uniquement pour l'envoi de newsletters et d'actualités de GureKultura.</p>
            <h3 class="text-md font-semibold mt-4">Droits et désabonnement</h3>
            <p class="text-sm">Vous pouvez demander la suppression de vos données ou vous désabonner à tout moment.</p>
            <h3 class="text-md font-semibold mt-4">Consentement</h3>
            <div class="flex items-center mt-2">
                <input type="checkbox" id="consentNewsletter" class="w-5 h-5 text-button border-gray-300 rounded focus:ring-hbutton">
                <label for="consentNewsletter" class="ml-2 text-sm text-gray-600">J'accepte les conditions</label>
            </div>
            <button class="w-full mt-4 p-2 bg-button text-tbutton rounded hover:bg-hbutton transition">S'abonner</button>
            <button id="closePopup" class="mt-2 text-sm text-gray-500 underline">Fermer</button>
        </div>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            document.getElementById("openNewsletterPopup").addEventListener("click", function() {
                document.getElementById("newsletterPopup").classList.remove("hidden");
            });
            
            document.getElementById("closePopup").addEventListener("click", function() {
                document.getElementById("newsletterPopup").classList.add("hidden");
            });
        });
    </script>

	<script>
		document.addEventListener("DOMContentLoaded", function () {
			// Gestion de l'affichage du mot de passe
			document.querySelectorAll(".toggle-password").forEach(function (button) {
				button.addEventListener("click", function () {
					let inputField = button.previousElementSibling; // Sélectionner l'input correspondant
					let icon = button.querySelector("img");

					if (inputField.type === "password") {
						inputField.type = "text";
						icon.src = "../asset/icones/eye-slash.svg"; // Icône pour cacher le mot de passe
						icon.alt = "Masquer le mot de passe";
					} else {
						inputField.type = "password";
						icon.src = "../asset/icones/eye.svg"; // Icône pour afficher le mot de passe
						icon.alt = "Afficher le mot de passe";
					}
				});
			});
		});
	</script>
	
<script src="../js/erreurSaisie.js"></script>
{% endblock %}
